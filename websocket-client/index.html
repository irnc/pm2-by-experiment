<base href="http://localhost:3000" />
<script src="/socket.io/socket.io.js"></script>
<script>
  function getSocketPort(location) {
    const matched = location.search.match(/^\?socket=(\d+)/);
    return matched ? matched[1] : 3000;
  }

  var socket = io(`http://localhost:${getSocketPort(location)}`);
  socket.on('connect', function(){});
  socket.on('event', function(data){});
  socket.on('disconnect', function(){});
  socket.on('echo', console.log);

  document.addEventListener('click', () => {
    socket.emit('message', { eventType: 'click' });
  });
</script>
